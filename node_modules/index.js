/* eslint-disable  func-names */
/* eslint quote-props: ["error", "consistent"]*/
/**
 * This sample demonstrates a simple skill built with the Amazon Alexa Skills
 * nodejs skill development kit, used for Communications 1301
 * This sample supports multiple lauguages. (en-US, en-GB, de-DE).
 **/

'use strict';
vim: syntax=javascript

const Alexa = require('alexa-sdk');

const APP_ID = "amzn1.ask.skill.d6de07e3-43b6-46f1-8867-0d0b1d02b86d";

const languageStrings = {
    'en': {
        translation: {
            FACTS: [
                'El Paso is unqualified for Amazons second headquarters because. A. there is nothing to attract tech talent. B. The city cannot retain STEM talent. And C. Have you seen the way El Paso does things? Look at all the construction. I dont make this stuff up. RIP Chuco Town. Hashtag Swol Jeff is never coming here.',
            ],
            SKILL_NAME: 'UTEP_COMM_1301',
            GET_FACT_MESSAGE: "Here's your fact: ",
            HELP_MESSAGE: 'You can say tell me a  fact, or, you can say exit... What can I help you with?',
            HELP_REPROMPT: 'What can I help you with?',
            STOP_MESSAGE: 'Goodbye!',
        },
    },
    'en-US': {
        translation: {
            FACTS: [
                'El Paso is unqualified for Amazons second headquarters because. A. there is nothing to attract tech talent. B. The city cannot retain STEM talent. And C. Have you seen the way El Paso does things? Look at all the construction. I dont make this stuff up. RIP Chuco Town. Hashtag Swol Jeff is never coming here.',
            ],
            SKILL_NAME: 'El Paso HQ2Facts',
        },
    },
    'en-GB': {
        translation: {
            FACTS: [
                'El Paso is unqualified for Amazons second headquarters because. A. there is nothing to attract tech talent. B. The city cannot retain STEM talent. And C. Have you seen the way El Paso does things? Look at all the construction. I dont make this stuff up. RIP Chuco Town. Hashtag Swol Jeff is never coming here.',
            ],
            SKILL_NAME: 'HQ2Facts',
        },
    },
    'de': {
        translation: {
            FACTS: [
                'El Paso is unqualified for Amazons second headquarters because. A. there is nothing to attract tech talent. B. The city cannot retain STEM talent. And C. Have you seen the way El Paso does things? Look at all the construction. I dont make this stuff up. RIP Chuco Town. Hashtag Swol Jeff is never coming here.',
            ],
            SKILL_NAME: 'UTEP_COMM_1301',
            GET_FACT_MESSAGE: 'Hier sind deine Fakten: ',
            HELP_MESSAGE: 'Du kannst sagen, „Nenne mir einen Fakt“, oder du kannst „Beenden“ sagen... Wie kann ich dir helfen?',
            HELP_REPROMPT: 'Wie kann ich dir helfen?',
            STOP_MESSAGE: 'Auf Wiedersehen!',
        },
    },
};

const handlers = {
    'LaunchRequest': function () {
        this.emit('GetFact');
    },
    'GetNewFactIntent': function () {
        this.emit('GetFact');
    },
    'GetFact': function () {
        // Get our fact
        // Use this.t() to get corresponding language data
        const factArr = this.t('FACTS');
        const factIndex = Math.floor(Math.random() * factArr.length);
        const randomFact = factArr[factIndex];

        // Create speech output
        const speechOutput = this.t('GET_FACT_MESSAGE') + randomFact;
        this.emit(':tellWithCard', speechOutput, this.t('SKILL_NAME'), randomFact);
    },
    'AMAZON.HelpIntent': function () {
        const speechOutput = this.t('HELP_MESSAGE');
        const reprompt = this.t('HELP_MESSAGE');
        this.emit(':ask', speechOutput, reprompt);
    },
    'AMAZON.CancelIntent': function () {
        this.emit(':tell', this.t('STOP_MESSAGE'));
    },
    'AMAZON.StopIntent': function () {
        this.emit(':tell', this.t('STOP_MESSAGE'));
    },
};

exports.handler = function (event, context) {
    const alexa = Alexa.handler(event, context);
    alexa.APP_ID = APP_ID;
    // To enable string internationalization (i18n) features, set a resources object.
    alexa.resources = languageStrings;
    alexa.registerHandlers(handlers);
    alexa.execute();
};
